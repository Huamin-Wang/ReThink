
<!-- 页面主内容 -->
<view class="main-content" bindtap="closeAll">
  <!-- 分类汇总卡片 -->
  <view class="card">
    <view class="title">分类汇总</view>
    <view class="summary-bar">
      <block wx:for="{{categorySums}}" wx:key="_id">
        <view class="summary-item">
          <text class="category">{{item._id}}</text>
          <text class="amount" style="color: {{item.sum > 0 ? 'red' : '#43e97b'}};">¥{{item.sum}}</text>
        </view>
      </block>
    </view>
  </view>


  <!-- 输入卡片 -->
  <view class="card">
    <view class="title">随口一句话记录生活收支</view>
    <view class="sub-title">如：超市购物花了68元，吃饭花了200,基金赚了200</view>
    <view class="input-box">
      <input name="desc" type="text" confirm-type="done"
             placeholder="请输入描述"
             bindinput="onDescInput" value="{{desc}}"
             bindconfirm="submitLifeRecord"
             class="amount-input"/>
    </view>
    <button class="submit-button" bindtap="submitLifeRecord">提交</button>
  </view>

  <!-- 消费明细列表 -->
  <view class="card">
    <view class="title">消费明细</view>
<block wx:for="{{records}}" wx:key="_id">
  <movable-area class="record-area">

      <!-- 主体内容 + 删除按钮一起放 -->
      <view class="record-wrapper">
        <view class="record-card" bindtap="showDeleteBtn" data-id="{{item._id}}">
          <view class="record-main">
            <view class="desc">{{item.description}}</view>
            <view class="amount" style="color:{{item.amount>0?'red':'#43e97b'}}">¥{{item.amount}}</view>
          </view>
          <view class="record-meta">
            <text class="category-tag">{{item.category}}</text>
            <text class="time">{{item.date || ''}}</text>
          </view>
        </view>

        <!-- 删除按钮 -->
  <view wx:if="{{showDeleteId === item._id}}" class="delete-btn" catchtap="onDelete" data-id="{{item._id}}">
  删除
</view>

      </view>

  </movable-area>
</block>


  </view>
</view>
